<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal del Estudiante | Nexus Chess</title>
    <link rel="icon" type="image/png" href="https://i.postimg.cc/xTd0NgKW/NEXUS-CHESS-BLANCO.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Oswald:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f8fafc; }
        .font-oswald { font-family: 'Oswald', sans-serif; }
        .fade-in { animation: fadeIn 0.6s cubic-bezier(0.16, 1, 0.3, 1); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Scrollbar elegante */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        
        /* Calendar Styles */
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 6px; }
        .calendar-day { 
            aspect-ratio: 1; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            border-radius: 10px; 
            font-size: 0.85rem; 
            font-weight: 600; 
            color: #64748b; 
            transition: all 0.2s;
            position: relative;
            cursor: default;
        }
        .calendar-day:hover:not(.empty):not(.active-status) { background-color: #f1f5f9; color: #0f172a; transform: scale(1.05); }
        .calendar-head { text-align: center; font-size: 0.7rem; font-weight: 800; color: #94a3b8; text-transform: uppercase; padding-bottom: 10px; letter-spacing: 0.05em; }

        /* Estados de Asistencia */
        .status-pending { background-color: #0f172a; color: white; box-shadow: 0 4px 6px -1px rgba(15, 23, 42, 0.3); } 
        .status-present { background-color: #10b981; color: white; box-shadow: 0 4px 6px -1px rgba(16, 185, 129, 0.3); } 
        .status-late { background-color: #f59e0b; color: white; box-shadow: 0 4px 6px -1px rgba(245, 158, 11, 0.3); } 
        .status-absent { background-color: #ef4444; color: white; box-shadow: 0 4px 6px -1px rgba(239, 68, 68, 0.3); } 

        .sidebar-link { transition: all 0.2s ease; border-left: 3px solid transparent; }
        .sidebar-link:hover, .sidebar-link.active { background-color: rgba(255,255,255,0.05); border-left-color: #3b82f6; color: white; }
        .sidebar-link i { transition: transform 0.2s; }
        .sidebar-link:hover i { transform: translateX(2px); }

        /* Chat Styles */
        .chat-bubble-user { background-color: #3b82f6; color: white; border-radius: 12px 12px 0 12px; align-self: flex-end; }
        .chat-bubble-bot { background-color: #f1f5f9; color: #1e293b; border-radius: 12px 12px 12px 0; align-self: flex-start; }
        .typing-indicator span { display: inline-block; width: 4px; height: 4px; background-color: #94a3b8; border-radius: 50%; animation: typing 1.4s infinite ease-in-out both; margin: 0 1px; }
        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes typing { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }

        /* Group Chat Specifics */
        .msg-bubble-self { background-color: #2563eb; color: white; border-radius: 16px 16px 0 16px; margin-left: auto; max-width: 80%; }
        .msg-bubble-other { background-color: #f1f5f9; color: #1e293b; border-radius: 16px 16px 16px 0; margin-right: auto; max-width: 80%; }
    </style>
</head>
<body class="text-slate-600 h-screen overflow-hidden flex flex-col antialiased selection:bg-blue-600 selection:text-white">

    <!-- LOGIN SCREEN -->
    <div id="login-screen" class="fixed inset-0 z-50 flex bg-white">
        <!-- Left Side: Image/Brand -->
        <div class="hidden lg:flex lg:w-1/2 relative bg-slate-900 overflow-hidden items-center justify-center">
            <div class="absolute inset-0 opacity-40">
                <img src="https://images.unsplash.com/photo-1529699211952-734e80c4d42b?q=80&w=2071&auto=format&fit=crop" class="w-full h-full object-cover">
            </div>
            <div class="absolute inset-0 bg-gradient-to-tr from-slate-900 via-slate-900/80 to-blue-900/40"></div>
            
            <div class="relative z-10 text-center p-12">
                <div class="w-32 h-32 mx-auto mb-8 bg-white/10 backdrop-blur-md rounded-3xl flex items-center justify-center border border-white/10 shadow-2xl">
                    <img src="https://i.postimg.cc/7ZMDp79f/LOGO-PNG-NEXUS-CHESS-sin-letras.png" class="w-20 h-20 object-contain drop-shadow-md">
                </div>
                <h1 class="text-5xl font-bold text-white font-oswald tracking-wide mb-4">NEXUS CHESS</h1>
                <p class="text-blue-200 text-lg max-w-md mx-auto leading-relaxed">Domina el tablero. Con√©ctate con tu futuro. La plataforma definitiva para estudiantes de ajedrez.</p>
            </div>
        </div>

        <!-- Right Side: Form -->
        <div class="w-full lg:w-1/2 flex items-center justify-center p-8 bg-slate-50">
            <div class="w-full max-w-md bg-white p-10 rounded-3xl shadow-xl shadow-slate-200/50 border border-slate-100 fade-in">
                <div class="lg:hidden text-center mb-8">
                    <img src="https://i.postimg.cc/7ZMDp79f/LOGO-PNG-NEXUS-CHESS-sin-letras.png" class="w-16 h-16 mx-auto mb-4">
                    <h2 class="text-2xl font-bold font-oswald text-slate-900">NEXUS CHESS</h2>
                </div>
                
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-slate-900">Bienvenido de nuevo</h2>
                    <p class="text-slate-500 text-sm mt-1">Ingresa tus credenciales para acceder al aula.</p>
                </div>

                <form id="login-form" class="space-y-5">
                    <div>
                        <label class="block text-xs font-bold text-slate-700 uppercase tracking-wide mb-2">C√≥digo de Estudiante</label>
                        <div class="relative">
                            <i data-lucide="user" class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"></i>
                            <input type="text" id="login-code" placeholder="Ej: STU-2024" class="w-full pl-12 pr-4 py-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all font-medium text-slate-900 placeholder-slate-400">
                        </div>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-700 uppercase tracking-wide mb-2">Contrase√±a</label>
                        <div class="relative">
                            <i data-lucide="lock" class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"></i>
                            <input type="password" id="login-pass" placeholder="Tu DNI o clave de acceso" class="w-full pl-12 pr-4 py-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all font-medium text-slate-900 placeholder-slate-400">
                        </div>
                    </div>

                    <div id="login-error" class="hidden p-3 rounded-lg bg-red-50 text-red-600 text-xs font-bold flex items-center gap-2">
                        <i data-lucide="alert-circle" class="w-4 h-4"></i> Credenciales incorrectas
                    </div>

                    <button type="submit" class="w-full bg-slate-900 hover:bg-slate-800 text-white font-bold py-4 rounded-xl shadow-lg shadow-slate-900/20 transition-all flex items-center justify-center gap-2 group">
                        <span>Ingresar al Portal</span>
                        <i data-lucide="arrow-right" class="w-4 h-4 group-hover:translate-x-1 transition-transform"></i>
                    </button>
                </form>

                <p class="mt-8 text-center text-xs text-slate-400">
                    &copy; 2024 Nexus Chess Academy. Todos los derechos reservados.
                </p>
            </div>
        </div>
    </div>

    <!-- MAIN APP INTERFACE -->
    <div id="main-app" class="hidden flex h-full bg-[#f8fafc]">
        
        <!-- SIDEBAR -->
        <aside class="hidden lg:flex flex-col w-64 bg-slate-900 text-slate-300 h-full fixed left-0 top-0 z-30 shadow-2xl shadow-slate-900/50">
            <!-- Brand -->
            <div class="h-20 flex items-center gap-3 px-6 border-b border-slate-800">
                <img src="https://i.postimg.cc/7ZMDp79f/LOGO-PNG-NEXUS-CHESS-sin-letras.png" class="w-8 h-8 object-contain brightness-0 invert">
                <span class="font-bold text-white font-oswald text-xl tracking-wider">NEXUS CHESS</span>
            </div>

            <!-- Navigation -->
            <div class="flex-1 py-6 px-3 space-y-1 overflow-y-auto">
                <p class="px-4 text-[10px] font-bold uppercase tracking-widest text-slate-500 mb-2">Principal</p>
                
                <button onclick="showSection('home')" id="nav-home" class="sidebar-link active w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium">
                    <i data-lucide="layout-grid" class="w-5 h-5"></i>
                    Dashboard
                </button>
                <button onclick="showSection('payments')" id="nav-payments" class="sidebar-link w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium">
                    <i data-lucide="credit-card" class="w-5 h-5"></i>
                    Pagos
                </button>
                
                <!-- BOT√ìN CHAT GRUPAL (NUEVO) -->
                <button onclick="showSection('chat')" id="nav-chat" class="sidebar-link w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium">
                    <i data-lucide="message-circle" class="w-5 h-5"></i>
                    Chat Grupal
                </button>
                
                <p class="px-4 text-[10px] font-bold uppercase tracking-widest text-slate-500 mb-2 mt-6">Herramientas</p>

                <a href="https://lichess.org/" target="_blank" class="sidebar-link w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium">
                    <i data-lucide="swords" class="w-5 h-5"></i>
                    Lichess
                </a>
                <a id="side-recordings" href="#" target="_blank" class="sidebar-link w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium">
                    <i data-lucide="video" class="w-5 h-5"></i>
                    Clases Grabadas
                </a>
                <a href="https://drive.google.com/drive/folders/1NQU77izbooxSF1Cp-0EqwbjGrcD6mHvR?usp=sharing" target="_blank" class="sidebar-link w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium">
                    <i data-lucide="book-open" class="w-5 h-5"></i>
                    Material de Estudio
                </a>
            </div>

            <!-- ASISTENTE IA (ENCIMA DEL PERFIL) -->
            <div class="px-3 pb-3 bg-slate-900">
                <button onclick="toggleChat(true)" class="sidebar-link w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium text-blue-300 hover:text-white group relative bg-slate-800/50 border border-slate-700/50 hover:border-blue-500/50 transition-all">
                    <i data-lucide="sparkles" class="w-5 h-5 text-yellow-400 group-hover:text-yellow-300 animate-pulse"></i>
                    <div>
                        Asistente IA
                        <div class="text-[9px] text-blue-400 font-normal leading-none group-hover:text-blue-200">Pagos, Horarios y Ajedrez</div>
                    </div>
                </button>
            </div>

            <!-- User Profile (Bottom Sidebar) -->
            <div class="p-4 border-t border-slate-800 bg-slate-900/50">
                <div class="flex items-center gap-3 mb-3">
                    <div class="w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-bold text-sm shadow-lg shadow-blue-900/50">
                        <span id="user-initials">ST</span>
                    </div>
                    <div class="flex-1 overflow-hidden">
                        <h4 id="sidebar-name" class="text-sm font-bold text-white truncate">Estudiante</h4>
                        <p id="sidebar-code" class="text-xs text-slate-500 truncate">STU-0000</p>
                    </div>
                </div>
                <button onclick="logout()" class="w-full flex items-center justify-center gap-2 py-2 rounded-lg bg-slate-800 hover:bg-red-900/30 text-slate-400 hover:text-red-400 transition-colors text-xs font-bold uppercase tracking-wide">
                    <i data-lucide="log-out" class="w-3 h-3"></i> Cerrar Sesi√≥n
                </button>
            </div>
        </aside>

        <!-- MAIN CONTENT -->
        <main class="flex-1 flex flex-col h-full lg:ml-64 relative">
            
            <!-- HEADER -->
            <header class="h-16 bg-white border-b border-slate-200 flex items-center justify-between px-6 lg:px-8 sticky top-0 z-20">
                <div class="flex items-center gap-4 lg:hidden">
                    <img src="https://i.postimg.cc/7ZMDp79f/LOGO-PNG-NEXUS-CHESS-sin-letras.png" class="w-8 h-8">
                </div>
                
                <div class="flex-1"></div>

                <div class="flex items-center gap-4">
                    <div class="hidden sm:flex items-center gap-2 px-3 py-1.5 bg-emerald-50 text-emerald-700 rounded-full border border-emerald-100">
                        <span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></span>
                        <span class="text-xs font-bold uppercase tracking-wide">Estado: Activo</span>
                    </div>
                    <button class="relative p-2 text-slate-400 hover:text-slate-600 transition-colors">
                        <i data-lucide="bell" class="w-5 h-5"></i>
                        <span class="absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border-2 border-white"></span>
                    </button>
                </div>
            </header>

            <!-- SCROLLABLE AREA -->
            <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
                
                <!-- HOME SECTION -->
                <div id="section-home" class="max-w-6xl mx-auto space-y-8 fade-in">
                    
                    <!-- WELCOME BANNER (SIN VENCIMIENTO) -->
                    <div class="bg-gradient-to-r from-slate-900 to-slate-800 rounded-2xl p-8 text-white shadow-lg relative overflow-hidden flex flex-col md:flex-row items-center justify-between gap-6">
                        <div class="relative z-10">
                            <h2 class="text-3xl font-bold font-oswald mb-2">¬°Hola, <span id="welcome-name">Campe√≥n</span>! üëã</h2>
                            <p class="text-slate-300 text-sm max-w-lg">
                                Tienes <span class="text-white font-bold underline decoration-blue-500 underline-offset-4">nuevas actividades</span> pendientes. Revisa tu progreso y prep√°rate para la pr√≥xima clase.
                            </p>
                        </div>
                        
                        <!-- Background decoration -->
                        <div class="absolute right-0 top-0 w-64 h-64 bg-blue-600 rounded-full blur-[100px] opacity-30 pointer-events-none"></div>
                        <img src="https://i.postimg.cc/xTd0NgKW/NEXUS-CHESS-BLANCO.png" class="absolute -left-10 -bottom-20 w-64 h-64 opacity-5 rotate-12 pointer-events-none">
                    </div>

                    <!-- MAIN GRID -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        
                        <!-- COLUMNA IZQUIERDA (2/3) -->
                        <div class="lg:col-span-2 space-y-8">
                            
                            <!-- NEXT CLASS CARD -->
                            <div class="bg-white rounded-2xl border border-slate-100 shadow-sm p-6 relative overflow-hidden">
                                <div class="flex items-center justify-between mb-6">
                                    <h3 class="font-bold text-slate-800 flex items-center gap-2">
                                        <i data-lucide="monitor" class="w-5 h-5 text-purple-600"></i>
                                        Sala de Clases
                                    </h3>
                                    <span id="dash-modality" class="bg-slate-100 text-slate-600 text-xs font-bold px-3 py-1 rounded-full uppercase">---</span>
                                </div>

                                <div class="flex flex-col md:flex-row items-center gap-6">
                                    <div class="flex-1 w-full">
                                        
                                        <div id="dash-schedule" class="text-2xl font-bold text-slate-800 mb-4">---</div>
                                        
                                        <a id="btn-meet" href="#" target="_blank" class="inline-flex items-center justify-center gap-2 bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-xl transition-all w-full md:w-auto shadow-lg shadow-purple-600/20">
                                            <i data-lucide="video" class="w-4 h-4"></i>
                                            Ingresar a Clase en Vivo
                                        </a>
                                        <div id="no-link-msg" class="text-xs text-red-500 mt-2 hidden font-medium flex items-center gap-1">
                                            <i data-lucide="alert-circle" class="w-3 h-3"></i> Enlace no disponible
                                        </div>
                                    </div>
                                    <div class="hidden md:block w-px h-24 bg-slate-100"></div>
                                    <div class="w-full md:w-1/3 text-center md:text-left">
                                        <p class="text-sm text-slate-500 leading-relaxed">
                                            Recuerda ingresar 5 minutos antes. Si tienes problemas t√©cnicos, contacta a soporte.
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <!-- ATTENDANCE CHART -->
                            <div class="bg-white rounded-2xl border border-slate-100 shadow-sm p-6 relative">
                                <div class="flex justify-between items-start mb-6">
                                    <h3 class="font-bold text-slate-800 flex items-center gap-2">
                                        <i data-lucide="bar-chart-2" class="w-5 h-5 text-blue-600"></i>
                                        Resumen de Asistencia
                                    </h3>
                                </div>

                                <div class="flex flex-col sm:flex-row items-center justify-around gap-8">
                                    <!-- Circular Chart -->
                                    <div class="relative w-32 h-32">
                                        <svg class="w-full h-full -rotate-90" viewBox="0 0 36 36">
                                            <path class="text-slate-100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="currentColor" stroke-width="3" />
                                            <path id="ring-present" class="text-blue-600 transition-all duration-1000 ease-out" stroke-dasharray="0, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" />
                                        </svg>
                                        <div class="absolute inset-0 flex flex-col items-center justify-center">
                                            <span id="stat-present-percent" class="text-2xl font-bold text-slate-800">0%</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Legend -->
                                    <div class="grid grid-cols-2 gap-4 w-full sm:w-auto">
                                        <div class="bg-slate-50 p-3 rounded-xl border border-slate-100">
                                            <div id="stat-present" class="text-xl font-bold text-slate-800">0</div>
                                            <div class="text-[10px] text-slate-400 font-bold uppercase flex items-center gap-1">
                                                <div class="w-2 h-2 bg-emerald-500 rounded-full"></div> Asistencias
                                            </div>
                                        </div>
                                        <div class="bg-slate-50 p-3 rounded-xl border border-slate-100">
                                            <div id="stat-late" class="text-xl font-bold text-slate-800">0</div>
                                            <div class="text-[10px] text-slate-400 font-bold uppercase flex items-center gap-1">
                                                <div class="w-2 h-2 bg-amber-500 rounded-full"></div> Tardanzas
                                            </div>
                                        </div>
                                        <div class="bg-slate-50 p-3 rounded-xl border border-slate-100 col-span-2">
                                            <div id="stat-absent" class="text-xl font-bold text-slate-800">0</div>
                                            <div class="text-[10px] text-slate-400 font-bold uppercase flex items-center gap-1">
                                                <div class="w-2 h-2 bg-red-500 rounded-full"></div> Faltas Totales
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- COLUMNA DERECHA (1/3) -->
                        <div class="space-y-8">
                            
                            <!-- CALENDAR WIDGET (RESTAURADO) -->
                            <div class="bg-white rounded-2xl border border-slate-100 shadow-sm p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="font-bold text-slate-800 text-sm tracking-wide uppercase">ENERO 2026</h3>
                                    <div class="bg-slate-100 p-2 rounded-full">
                                        <i data-lucide="calendar" class="w-4 h-4 text-slate-500"></i>
                                    </div>
                                </div>
                                <div class="calendar-grid mb-2">
                                    <div class="calendar-head">L</div>
                                    <div class="calendar-head">M</div>
                                    <div class="calendar-head">X</div>
                                    <div class="calendar-head">J</div>
                                    <div class="calendar-head">V</div>
                                    <div class="calendar-head">S</div>
                                    <div class="calendar-head">D</div>
                                </div>
                                <div id="calendar-days" class="calendar-grid">
                                    <!-- Rendered by JS -->
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

                <!-- PAYMENTS SECTION -->
                <div id="section-payments" class="hidden max-w-4xl mx-auto fade-in h-full flex-col justify-center">
                     <div class="bg-white rounded-3xl shadow-lg border border-slate-100 overflow-hidden">
                        <div class="p-8 border-b border-slate-100 flex justify-between items-center bg-slate-50/50">
                            <div>
                                <h2 class="text-2xl font-bold text-slate-800">Estado Financiero</h2>
                                <p class="text-slate-500 text-sm">Resumen de cuenta y pr√≥ximos pagos</p>
                            </div>
                            <div class="w-12 h-12 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center">
                                <i data-lucide="check" class="w-6 h-6"></i>
                            </div>
                        </div>
                        
                        <div class="p-8 grid md:grid-cols-2 gap-12">
                            <div>
                                <div class="mb-6">
                                    <span class="text-xs font-bold text-slate-400 uppercase tracking-wider">√öltimo Pago</span>
                                    <div class="flex items-baseline gap-1 mt-1">
                                        <span class="text-3xl font-bold text-slate-800">S/. <span id="dash-amount">0.00</span></span>
                                        <span class="text-sm text-slate-500">PEN</span>
                                    </div>
                                </div>
                                
                                <div class="space-y-4">
                                    <div class="flex justify-between items-center p-4 rounded-2xl bg-white border border-slate-100 hover:border-slate-200 transition-colors">
                                        <div class="flex items-center gap-3">
                                            <div class="w-2 h-2 rounded-full bg-blue-500"></div>
                                            <span class="text-sm font-bold text-slate-600">Pr√≥ximo Vencimiento</span>
                                        </div>
                                        <span id="dash-renewal-pay" class="text-sm font-bold text-slate-800 bg-slate-100 px-4 py-2 rounded-xl">---</span>
                                    </div>

                                    <div class="flex justify-between items-center p-4 bg-emerald-50 rounded-xl border border-emerald-100">
                                        <span class="text-sm font-medium text-emerald-700">Estado</span>
                                        <span class="text-xs font-bold bg-emerald-200 text-emerald-800 px-2 py-1 rounded">AL D√çA</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-slate-900 rounded-2xl p-6 text-white relative overflow-hidden">
                                <div class="relative z-10">
                                    <h4 class="font-bold mb-4 flex items-center gap-2">
                                        <i data-lucide="landmark" class="w-4 h-4 text-slate-400"></i> Cuentas Bancarias
                                    </h4>
                                    <div class="space-y-3 text-sm">
                                        <div class="p-3 bg-white/5 rounded-lg border border-white/10">
                                            <div class="text-xs text-slate-400">BCP Soles</div>
                                            <div class="font-mono tracking-wide mt-1">Pr√≥ximamente</div>
                                        </div>
                                        
                                        <div onclick="toggleQR(true)" class="p-3 bg-white/5 rounded-lg border border-white/10 cursor-pointer hover:bg-white/10 transition-all duration-300 group">
                                            <div class="flex justify-between items-center">
                                                <div>
                                                    <div class="text-xs text-slate-400 group-hover:text-white transition-colors">Yape</div>
                                                    <div class="font-mono tracking-wide mt-1 text-lg font-bold text-white">983 290 098</div>
                                                </div>
                                                <i data-lucide="qr-code" class="w-5 h-5 text-slate-400 group-hover:text-emerald-400 transition-colors"></i>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                     </div>
                </div>

                <!-- CHAT GRUPAL SECTION (NUEVO) -->
                <div id="section-chat" class="hidden h-full flex flex-col fade-in">
                    <div class="flex-none p-6 border-b border-slate-200 bg-white/80 backdrop-blur-sm sticky top-0 z-10">
                        <div class="flex justify-between items-center max-w-5xl mx-auto">
                            <div>
                                <h2 class="text-2xl font-bold text-slate-800 font-oswald flex items-center gap-2">
                                    <i data-lucide="messages-square" class="w-6 h-6 text-blue-600"></i>
                                    Chat del Grupo
                                </h2>
                                <p class="text-sm text-slate-500">Con√©ctate con tus compa√±eros de clase</p>
                            </div>
                            <div class="bg-blue-50 px-3 py-1 rounded-full border border-blue-100 text-xs font-bold text-blue-600 uppercase tracking-wide">
                                En Vivo
                            </div>
                        </div>
                    </div>

                    <div class="flex-1 overflow-y-auto p-6 bg-slate-50" id="group-chat-container">
                        <div class="max-w-5xl mx-auto space-y-4" id="group-chat-messages">
                            <!-- Mensajes se cargar√°n aqu√≠ -->
                            <div class="flex flex-col items-center justify-center h-full text-slate-400 py-10">
                                <i data-lucide="message-square-dashed" class="w-12 h-12 mb-2 opacity-50"></i>
                                <p class="text-sm">Cargando mensajes del grupo...</p>
                            </div>
                        </div>
                    </div>

                    <div class="flex-none p-4 bg-white border-t border-slate-200">
                        <div class="max-w-5xl mx-auto flex gap-3">
                            <input type="text" id="group-chat-input" placeholder="Escribe un mensaje a tu grupo..." class="flex-1 bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all" onkeypress="handleGroupChatEnter(event)">
                            <button onclick="sendGroupMessage()" class="bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-xl transition-all shadow-md hover:shadow-lg flex items-center justify-center">
                                <i data-lucide="send" class="w-5 h-5"></i>
                            </button>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <!-- QR MODAL -->
    <div id="qr-modal" class="fixed inset-0 z-[70] hidden flex items-center justify-center">
        <div id="qr-backdrop" class="absolute inset-0 bg-slate-900/60 backdrop-blur-md opacity-0 transition-opacity duration-500 ease-out" onclick="toggleQR(false)"></div>
        <div id="qr-content" class="relative bg-white rounded-3xl p-6 shadow-2xl w-full max-w-sm mx-4 flex flex-col items-center opacity-0 scale-95 translate-y-4 transition-all duration-500 ease-out">
            <button onclick="toggleQR(false)" class="absolute top-4 right-4 p-2 rounded-full hover:bg-slate-100 text-slate-400 hover:text-slate-600 transition-colors">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
            <h3 class="text-2xl font-bold text-slate-800 font-oswald mb-2 mt-2">Yape</h3>
            <p class="text-slate-500 text-sm mb-6">Escanea para realizar el pago</p>
            <div class="bg-white p-2 rounded-xl border-2 border-slate-100 shadow-inner mb-4">
                <img src="https://i.postimg.cc/BvsZftrZ/Whats-App-Image-2026-01-13-at-11-09-07-PM.jpg" alt="QR Yape" class="w-64 h-64 object-contain rounded-lg">
            </div>
            <div class="text-center">
                <p class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-1">Titular</p>
                <p class="text-lg font-bold text-slate-800">Giomar Romero</p>
                <p class="text-emerald-500 font-mono font-bold mt-1">983 290 098</p>
            </div>
        </div>
    </div>

    <!-- CHAT MODAL (AI ASSISTANT) -->
    <div id="chat-modal" class="fixed bottom-4 right-4 z-50 hidden flex-col w-full max-w-xs bg-white rounded-2xl shadow-2xl border border-slate-200 overflow-hidden fade-in h-[500px]">
        <div class="bg-slate-900 p-4 flex justify-between items-center shrink-0">
            <div class="flex items-center gap-2 text-white">
                <i data-lucide="sparkles" class="w-5 h-5 text-yellow-400"></i>
                <span class="font-bold text-sm">Asistente Nexus IA</span>
            </div>
            <button onclick="toggleChat(false)" class="text-slate-400 hover:text-white transition-colors">
                <i data-lucide="x" class="w-4 h-4"></i>
            </button>
        </div>
        <div id="chat-messages" class="flex-1 overflow-y-auto p-4 space-y-3 bg-slate-50 flex flex-col">
            <div class="p-3 chat-bubble-bot text-xs max-w-[90%]">
                ¬°Hola! Soy tu asistente virtual potenciado por IA ü§ñ. Puedo ayudarte con dudas sobre tus <strong>pagos</strong>, <strong>horarios</strong> o darte consejos de <strong>ajedrez</strong>. ¬øQu√© deseas saber hoy?
            </div>
        </div>
        <div class="p-3 bg-white border-t border-slate-100 flex gap-2">
            <input type="text" id="chat-input" placeholder="Escribe tu duda..." class="flex-1 bg-slate-50 border border-slate-200 rounded-xl px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20" onkeypress="handleChatEnter(event)">
            <button onclick="sendChatMessage()" class="bg-blue-600 text-white p-2 rounded-xl hover:bg-blue-700 transition-colors">
                <i data-lucide="send" class="w-4 h-4"></i>
            </button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, onValue, push, set } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyB_JqJuavM7TBvnuWtFW55wxqFSWMxrk3Q",
            authDomain: "nexus-chess-base-general.firebaseapp.com",
            databaseURL: "https://nexus-chess-base-general-default-rtdb.firebaseio.com",
            projectId: "nexus-chess-base-general",
            storageBucket: "nexus-chess-base-general.firebasestorage.app",
            messagingSenderId: "521727118362",
            appId: "1:521727118362:web:0ac3549eec2a67009595a3",
            measurementId: "G-44QJGQQ2FC"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // GEMINI API
        const apiKey = "";
        const geminiEndpoint = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

        window.systemData = null;
        window.currentUser = null;
        window.currentCalendarDate = new Date(2026, 0, 1); 

        const dbRef = ref(db, 'academy_v1');
        onValue(dbRef, (snapshot) => {
            const data = snapshot.val();
            if (data) {
                window.systemData = data;
                checkSession(); 
            }
        });

        // ---------------- GROUP CHAT LOGIC ----------------
        
        window.initGroupChat = function() {
            if (!window.currentUser || !window.currentUser.assignedClassId) return;
            
            const classId = window.currentUser.assignedClassId;
            const chatRef = ref(db, `group_chats/${classId}`);
            
            // Listen for new messages
            onValue(chatRef, (snapshot) => {
                const messages = snapshot.val();
                const container = document.getElementById('group-chat-messages');
                container.innerHTML = '';
                
                if (!messages) {
                    container.innerHTML = `
                        <div class="flex flex-col items-center justify-center h-full text-slate-400 py-10 opacity-70">
                            <i data-lucide="message-square" class="w-12 h-12 mb-2"></i>
                            <p class="text-sm">A√∫n no hay mensajes. ¬°S√© el primero en saludar!</p>
                        </div>
                    `;
                    lucide.createIcons();
                    return;
                }

                Object.values(messages).forEach(msg => {
                    const isSelf = msg.studentId === window.currentUser.id;
                    const time = new Date(msg.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                    
                    const bubble = document.createElement('div');
                    bubble.className = `flex w-full ${isSelf ? 'justify-end' : 'justify-start'}`;
                    
                    const initials = msg.senderName.substring(0, 2).toUpperCase();
                    const avatarColor = isSelf ? 'bg-blue-600' : 'bg-slate-400';
                    
                    bubble.innerHTML = `
                        <div class="flex max-w-[80%] ${isSelf ? 'flex-row-reverse' : 'flex-row'} gap-3">
                            <div class="w-8 h-8 rounded-full ${avatarColor} flex items-center justify-center text-white text-[10px] font-bold shrink-0 shadow-sm border-2 border-white">
                                ${initials}
                            </div>
                            <div class="flex flex-col ${isSelf ? 'items-end' : 'items-start'}">
                                <span class="text-[10px] text-slate-400 mb-1 ml-1">${msg.senderName}</span>
                                <div class="px-4 py-2.5 shadow-sm text-sm ${isSelf ? 'msg-bubble-self' : 'msg-bubble-other'}">
                                    ${msg.text}
                                </div>
                                <span class="text-[9px] text-slate-300 mt-1 mx-1">${time}</span>
                            </div>
                        </div>
                    `;
                    container.appendChild(bubble);
                });
                
                // Scroll to bottom
                const scrollContainer = document.getElementById('group-chat-container');
                scrollContainer.scrollTop = scrollContainer.scrollHeight;
            });
        }

        window.handleGroupChatEnter = function(e) {
            if (e.key === 'Enter') sendGroupMessage();
        }

        window.sendGroupMessage = function() {
            const input = document.getElementById('group-chat-input');
            const text = input.value.trim();
            if (!text || !window.currentUser) return;

            const classId = window.currentUser.assignedClassId;
            const chatRef = ref(db, `group_chats/${classId}`);
            
            push(chatRef, {
                studentId: window.currentUser.id,
                senderName: window.currentUser.studentName,
                text: text,
                timestamp: Date.now()
            });

            input.value = '';
        }


        // ---------------- TOGGLE QR ----------------
        window.toggleQR = function(show) {
            const modal = document.getElementById('qr-modal');
            const backdrop = document.getElementById('qr-backdrop');
            const content = document.getElementById('qr-content');

            if(show) {
                modal.classList.remove('hidden');
                setTimeout(() => {
                    backdrop.classList.remove('opacity-0');
                    content.classList.remove('opacity-0', 'scale-95', 'translate-y-4');
                }, 20);
            } else {
                backdrop.classList.add('opacity-0');
                content.classList.add('opacity-0', 'scale-95', 'translate-y-4');
                setTimeout(() => {
                    modal.classList.add('hidden');
                }, 500);
            }
        }

        // ---------------- CALENDAR LOGIC (RESTAURADA) ----------------
        
        window.renderCalendar = function() {
            const daysContainer = document.getElementById('calendar-days');
            if(!daysContainer) return;
            daysContainer.innerHTML = '';

            // Enero 2026
            const startDayIndex = 3; 
            const totalDays = 31;

            for(let i = 0; i < startDayIndex; i++) {
                const empty = document.createElement('div');
                daysContainer.appendChild(empty);
            }

            for(let day = 1; day <= totalDays; day++) {
                const dayEl = document.createElement('div');
                dayEl.innerText = day;
                dayEl.className = 'calendar-day';
                
                if(window.currentUser) {
                    const dayStr = day < 10 ? `0${day}` : day;
                    const dateKey = `2026-01-${dayStr}`;
                    
                    let status = null;
                    if(window.systemData.attendanceData && window.systemData.attendanceData[dateKey]) {
                        status = window.systemData.attendanceData[dateKey][window.currentUser.id];
                    } 
                    else {
                        const currentWeekDay = (startDayIndex + day - 1) % 7; 
                        const scheduleText = (window.currentUser.schedule || window.currentUser.horario || "").toLowerCase();
                        const myClassDays = [];
                        if(scheduleText.includes('lunes')) myClassDays.push(0);
                        if(scheduleText.includes('martes')) myClassDays.push(1);
                        if(scheduleText.includes('mi√©rcoles') || scheduleText.includes('miercoles')) myClassDays.push(2);
                        if(scheduleText.includes('jueves')) myClassDays.push(3);
                        if(scheduleText.includes('viernes')) myClassDays.push(4);
                        if(scheduleText.includes('s√°bado') || scheduleText.includes('sabado')) myClassDays.push(5);
                        if(scheduleText.includes('domingo')) myClassDays.push(6);

                        if(myClassDays.includes(currentWeekDay)) {
                            dayEl.classList.add('status-pending', 'active-status');
                        }
                    }
                    
                    if(status === 'A') dayEl.className = 'calendar-day status-present active-status';
                    else if(status === 'T') dayEl.className = 'calendar-day status-late active-status';
                    else if(status === 'F') dayEl.className = 'calendar-day status-absent active-status';
                }

                daysContainer.appendChild(dayEl);
            }
        }

        // CHAT BOT (GEMINI)
        window.toggleChat = function(show) {
            const chatModal = document.getElementById('chat-modal');
            if(show) {
                chatModal.classList.remove('hidden');
                chatModal.classList.add('flex');
                document.getElementById('chat-input').focus();
            } else {
                chatModal.classList.add('hidden');
                chatModal.classList.remove('flex');
            }
        }

        window.handleChatEnter = function(e) {
            if (e.key === 'Enter') sendChatMessage();
        }

        window.sendChatMessage = async function() {
            const inputEl = document.getElementById('chat-input');
            const msgText = inputEl.value.trim();
            if (!msgText) return;

            addMessageToChat(msgText, 'user');
            inputEl.value = '';

            const loadingId = addLoadingIndicator();

            try {
                const responseText = await callGeminiForChat(msgText);
                removeMessage(loadingId);
                addMessageToChat(responseText, 'bot');
            } catch (error) {
                console.error(error);
                removeMessage(loadingId);
                addMessageToChat("Lo siento, tuve un problema conectando con el servidor.", 'bot');
            }
        }

        function addMessageToChat(text, sender) {
            const container = document.getElementById('chat-messages');
            const bubble = document.createElement('div');
            bubble.className = `p-3 text-xs max-w-[90%] ${sender === 'user' ? 'chat-bubble-user' : 'chat-bubble-bot'}`;
            bubble.innerHTML = text; 
            container.appendChild(bubble);
            container.scrollTop = container.scrollHeight;
            return bubble;
        }

        function addLoadingIndicator() {
            const container = document.getElementById('chat-messages');
            const bubble = document.createElement('div');
            const id = 'msg-' + Date.now();
            bubble.id = id;
            bubble.className = `p-3 text-xs max-w-[90%] chat-bubble-bot flex items-center h-10`;
            bubble.innerHTML = `<div class="typing-indicator"><span></span><span></span><span></span></div>`;
            container.appendChild(bubble);
            container.scrollTop = container.scrollHeight;
            return id;
        }

        function removeMessage(id) {
            const el = document.getElementById(id);
            if(el) el.remove();
        }

        async function callGeminiForChat(userPrompt) {
            if (!window.currentUser) return "Error: Datos de usuario no cargados.";

            const studentContext = {
                nombre: window.currentUser.studentName,
                codigo: window.currentUser.discountCode || `STU-${window.currentUser.id}`,
                horario: window.currentUser.schedule || window.currentUser.horario,
                deuda: window.currentUser.paymentAmount,
                vencimiento: window.currentUser.renewalDate,
                inicioCiclo: window.currentUser.cycleStartDate,
                modalidad: window.currentUser.modality
            };

            const systemPrompt = `
                Eres Nexus AI, el asistente virtual de Nexus Chess Academy.
                DATOS DEL ESTUDIANTE: ${JSON.stringify(studentContext)}
                INSTRUCCIONES:
                1. Responde preguntas sobre horarios, pagos, fechas de clase y asistencia.
                2. Usa la l√≥gica de que un ciclo tiene 8 clases mensuales.
                3. Si preguntan de ajedrez, da un consejo breve y estrat√©gico.
                4. S√© amable, motivador y usa emojis. Respuestas cortas.
                5. Pagos: BCP (Pr√≥ximamente) y Yape 983 290 098 (Giomar Romero).
            `;

            const payload = {
                contents: [{
                    role: "user",
                    parts: [{ text: `Contexto: ${systemPrompt}\n\nPregunta del usuario: ${userPrompt}` }]
                }]
            };

            const response = await fetchWithRetry(geminiEndpoint, payload);
            return response.candidates?.[0]?.content?.parts?.[0]?.text || "No pude generar una respuesta.";
        }

        async function fetchWithRetry(url, payload, retries = 3) {
            let delay = 1000;
            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    return await response.json();
                } catch (error) {
                    if (i === retries - 1) throw error;
                    await new Promise(res => setTimeout(res, delay));
                    delay *= 2;
                }
            }
        }

        // NAVIGATION
        window.showSection = function(sectionId) {
            document.getElementById('section-home').classList.add('hidden');
            document.getElementById('section-payments').classList.add('hidden');
            document.getElementById('section-chat').classList.add('hidden');
            
            const btnHome = document.getElementById('nav-home');
            const btnPay = document.getElementById('nav-payments');
            const btnChat = document.getElementById('nav-chat');
            
            // Reset ALL
            [btnHome, btnPay, btnChat].forEach(btn => {
                if(btn) {
                    btn.classList.remove('bg-blue-50/80', 'text-blue-700', 'border-blue-100');
                    btn.classList.add('text-slate-500', 'hover:bg-slate-50', 'hover:text-slate-800');
                }
            });

            if(sectionId === 'home') {
                document.getElementById('section-home').classList.remove('hidden');
                btnHome.classList.add('bg-blue-50/80', 'text-blue-700', 'border-blue-100');
                btnHome.classList.remove('text-slate-500', 'hover:bg-slate-50', 'hover:text-slate-800');
            } else if (sectionId === 'payments') {
                document.getElementById('section-payments').classList.remove('hidden');
                document.getElementById('section-payments').classList.add('flex'); 
                btnPay.classList.add('bg-blue-50/80', 'text-blue-700', 'border-blue-100');
                btnPay.classList.remove('text-slate-500', 'hover:bg-slate-50', 'hover:text-slate-800');
            } else if (sectionId === 'chat') {
                document.getElementById('section-chat').classList.remove('hidden');
                btnChat.classList.add('bg-blue-50/80', 'text-blue-700', 'border-blue-100');
                btnChat.classList.remove('text-slate-500', 'hover:bg-slate-50', 'hover:text-slate-800');
                // Init chat listeners when section opens
                initGroupChat();
            }
        }

        window.handleLogin = function(e) {
            e.preventDefault();
            const code = document.getElementById('login-code').value.trim();
            const pass = document.getElementById('login-pass').value.trim();
            const errorMsg = document.getElementById('login-error');

            if (!window.systemData || !window.systemData.students) return;
            
            const student = window.systemData.students.find(s => {
                const studentCode = s.discountCode || `STU-${s.id}`;
                return studentCode.toUpperCase() === code.toUpperCase() && s.guardianDni === pass;
            });

            if (student) {
                localStorage.setItem('nexus_student_session', JSON.stringify(student.id));
                errorMsg.classList.add('hidden');
                initDashboard(student);
            } else {
                errorMsg.classList.remove('hidden');
            }
        };

        document.getElementById('login-form').addEventListener('submit', window.handleLogin);

        window.checkSession = function() {
            const sessionId = localStorage.getItem('nexus_student_session');
            if (sessionId && window.systemData && window.systemData.students) {
                const student = window.systemData.students.find(s => s.id == sessionId);
                if (student) initDashboard(student);
            }
        }

        window.logout = function() {
            localStorage.removeItem('nexus_student_session');
            location.reload();
        }

        function initDashboard(student) {
            window.currentUser = student;
            document.getElementById('login-screen').classList.add('hidden');
            document.getElementById('main-app').classList.remove('hidden');
            document.getElementById('main-app').classList.add('fade-in');

            const fName = student.studentName || '';
            const lName = student.studentLastName || '';
            
            document.getElementById('welcome-name').innerText = fName.split(' ')[0];
            document.getElementById('sidebar-name').innerText = `${fName.split(' ')[0]} ${lName.split(' ')[0]}`;
            document.getElementById('sidebar-code').innerText = student.discountCode || `STU-${student.id}`;
            document.getElementById('user-initials').innerText = (fName[0] + (lName[0] || '')).toUpperCase();

            const scheduleText = student.schedule || student.horario || 'Por definir';
            document.getElementById('dash-schedule').innerText = scheduleText;
            
            const modalityText = student.modality || 'Presencial'; 
            document.getElementById('dash-modality').innerText = modalityText;
            
            let classInfo = null;
            if (window.systemData.classrooms) {
                classInfo = window.systemData.classrooms.find(c => c.id === student.assignedClassId);
            }
            
            const meetBtn = document.getElementById('btn-meet');
            if (classInfo && classInfo.meetLink && classInfo.meetLink.length > 5) {
                meetBtn.href = classInfo.meetLink;
                meetBtn.classList.remove('opacity-50', 'pointer-events-none', 'bg-slate-400');
                meetBtn.classList.add('bg-purple-600', 'hover:bg-purple-700');
                document.getElementById('no-link-msg').classList.add('hidden');
            } else {
                meetBtn.href = "#";
                meetBtn.classList.add('opacity-50', 'pointer-events-none', 'bg-slate-400');
                meetBtn.classList.remove('bg-purple-600', 'hover:bg-purple-700');
                document.getElementById('no-link-msg').classList.remove('hidden');
            }

            const sideRecBtn = document.getElementById('side-recordings');
            const fallbackLink = "https://drive.google.com/drive/folders/1BBPEQ5BsIYwOHJiqOezVPZ-jOtLjDiOq?usp=sharing";
            const targetLink = (classInfo && classInfo.driveLink && classInfo.driveLink.length > 5) ? classInfo.driveLink : fallbackLink;
            
            sideRecBtn.href = targetLink;

            // PAYMENTS
            document.getElementById('dash-renewal-pay').innerText = student.renewalDate || '---';
            const amount = student.paymentAmount !== undefined ? student.paymentAmount : 0;
            document.getElementById('dash-amount').innerText = Number(amount).toFixed(2);
            
            calculateAttendance(student.id);
            renderCalendar();
            lucide.createIcons();
        }

        function calculateAttendance(studentId) {
            let present = 0, late = 0, absent = 0;
            if (window.systemData.attendanceData) {
                Object.values(window.systemData.attendanceData).forEach(dayRecord => {
                    const status = dayRecord[studentId];
                    if (status === 'A') present++;
                    else if (status === 'T') late++;
                    else if (status === 'F') absent++;
                });
            }
            const total = present + late + absent;
            document.getElementById('stat-present').innerText = present;
            document.getElementById('stat-late').innerText = late;
            document.getElementById('stat-absent').innerText = absent;
            
            let percentage = 0;
            if (total > 0) {
                percentage = Math.round((present / total) * 100);
            }
            document.getElementById('stat-present-percent').innerText = `${percentage}%`;
            
            setTimeout(() => {
                 document.getElementById('ring-present').setAttribute('stroke-dasharray', `${percentage}, 100`);
            }, 500);
            
            renderCalendar();
        }
        
        window.onload = () => { lucide.createIcons(); }
    </script>
</body>
</html>
